/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-licenses",
factory: function (require) {
"use strict";var plugin=(()=>{var Jt=Object.create;var Z=Object.defineProperty;var Kt=Object.getOwnPropertyDescriptor;var Xt=Object.getOwnPropertyNames;var Qt=Object.getPrototypeOf,Zt=Object.prototype.hasOwnProperty;var x=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+i+'" is not supported')});var J=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),tt=(i,t)=>{for(var e in t)Z(i,e,{get:t[e],enumerable:!0})},Lt=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Xt(t))!Zt.call(i,r)&&r!==e&&Z(i,r,{get:()=>t[r],enumerable:!(s=Kt(t,r))||s.enumerable});return i};var te=(i,t,e)=>(e=i!=null?Jt(Qt(i)):{},Lt(t||!i||!i.__esModule?Z(e,"default",{value:i,enumerable:!0}):e,i)),ee=i=>Lt(Z({},"__esModule",{value:!0}),i);var Pt=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var F=(i,t,e)=>(Pt(i,t,"read from private field"),e?e.call(i):t.get(i)),et=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)};var v=(i,t,e)=>(Pt(i,t,"access private method"),e);var zt=J((Ue,_t)=>{var K=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ie=typeof AbortController=="function",it=ie?AbortController:class{constructor(){this.signal=new xt}abort(t=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||t,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},se=typeof AbortSignal=="function",re=typeof it.AbortSignal=="function",xt=se?AbortSignal:re?it.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(t){t.type==="abort"&&(this.aborted=!0,this.onabort(t),this._listeners.forEach(e=>e(t),this))}onabort(){}addEventListener(t,e){t==="abort"&&this._listeners.push(e)}removeEventListener(t,e){t==="abort"&&(this._listeners=this._listeners.filter(s=>s!==e))}},ut=new Set,ct=(i,t)=>{let e=`LRU_CACHE_OPTION_${i}`;st(e)&&pt(e,`${i} option`,`options.${t}`,T)},ft=(i,t)=>{let e=`LRU_CACHE_METHOD_${i}`;if(st(e)){let{prototype:s}=T,{get:r}=Object.getOwnPropertyDescriptor(s,i);pt(e,`${i} method`,`cache.${t}()`,r)}},ne=(i,t)=>{let e=`LRU_CACHE_PROPERTY_${i}`;if(st(e)){let{prototype:s}=T,{get:r}=Object.getOwnPropertyDescriptor(s,i);pt(e,`${i} property`,`cache.${t}`,r)}},kt=(...i)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...i):console.error(...i)},st=i=>!ut.has(i),pt=(i,t,e,s)=>{ut.add(i);let r=`The ${t} is deprecated. Please use ${e} instead.`;kt(r,"DeprecationWarning",i,s)},O=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),At=i=>O(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?N:null:null,N=class extends Array{constructor(t){super(t),this.fill(0)}},dt=class{constructor(t){if(t===0)return[];let e=At(t);this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},T=class{constructor(t={}){let{max:e=0,ttl:s,ttlResolution:r=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:p,dispose:c,disposeAfter:h,noDisposeOnSet:y,noUpdateTTL:l,maxSize:d=0,maxEntrySize:S=0,sizeCalculation:$,fetchMethod:u,fetchContext:g,noDeleteOnFetchRejection:A,noDeleteOnStaleGet:P,allowStaleOnFetchRejection:k,allowStaleOnFetchAbort:C,ignoreFetchAbort:j}=t,{length:Y,maxAge:V,stale:G}=t instanceof T?{}:t;if(e!==0&&!O(e))throw new TypeError("max option must be a nonnegative integer");let ht=e?At(e):Array;if(!ht)throw new Error("invalid max value: "+e);if(this.max=e,this.maxSize=d,this.maxEntrySize=S||this.maxSize,this.sizeCalculation=$||Y,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=u||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=g,!this.fetchMethod&&g!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(e).fill(null),this.valList=new Array(e).fill(null),this.next=new ht(e),this.prev=new ht(e),this.head=0,this.tail=0,this.free=new dt(e),this.initialFill=1,this.size=0,typeof c=="function"&&(this.dispose=c),typeof h=="function"?(this.disposeAfter=h,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!y,this.noUpdateTTL=!!l,this.noDeleteOnFetchRejection=!!A,this.allowStaleOnFetchRejection=!!k,this.allowStaleOnFetchAbort=!!C,this.ignoreFetchAbort=!!j,this.maxEntrySize!==0){if(this.maxSize!==0&&!O(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!O(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!p||!!G,this.noDeleteOnStaleGet=!!P,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=O(r)||r===0?r:1,this.ttlAutopurge=!!n,this.ttl=s||V||0,this.ttl){if(!O(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let lt="LRU_CACHE_UNBOUNDED";st(lt)&&(ut.add(lt),kt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",lt,T))}G&&ct("stale","allowStale"),V&&ct("maxAge","ttl"),Y&&ct("length","sizeCalculation")}getRemainingTTL(t){return this.has(t,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new N(this.max),this.starts=new N(this.max),this.setItemTTL=(s,r,n=K.now())=>{if(this.starts[s]=r!==0?n:0,this.ttls[s]=r,r!==0&&this.ttlAutopurge){let o=setTimeout(()=>{this.isStale(s)&&this.delete(this.keyList[s])},r+1);o.unref&&o.unref()}},this.updateItemAge=s=>{this.starts[s]=this.ttls[s]!==0?K.now():0},this.statusTTL=(s,r)=>{s&&(s.ttl=this.ttls[r],s.start=this.starts[r],s.now=t||e(),s.remainingTTL=s.now+s.ttl-s.start)};let t=0,e=()=>{let s=K.now();if(this.ttlResolution>0){t=s;let r=setTimeout(()=>t=0,this.ttlResolution);r.unref&&r.unref()}return s};this.getRemainingTTL=s=>{let r=this.keyMap.get(s);return r===void 0?0:this.ttls[r]===0||this.starts[r]===0?1/0:this.starts[r]+this.ttls[r]-(t||e())},this.isStale=s=>this.ttls[s]!==0&&this.starts[s]!==0&&(t||e())-this.starts[s]>this.ttls[s]}updateItemAge(t){}statusTTL(t,e){}setItemTTL(t,e,s){}isStale(t){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new N(this.max),this.removeItemSize=t=>{this.calculatedSize-=this.sizes[t],this.sizes[t]=0},this.requireSize=(t,e,s,r)=>{if(this.isBackgroundFetch(e))return 0;if(!O(s))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(s=r(e,t),!O(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.addItemSize=(t,e,s)=>{if(this.sizes[t]=e,this.maxSize){let r=this.maxSize-this.sizes[t];for(;this.calculatedSize>r;)this.evict(!0)}this.calculatedSize+=this.sizes[t],s&&(s.entrySize=e,s.totalCalculatedSize=this.calculatedSize)}}removeItemSize(t){}addItemSize(t,e){}requireSize(t,e,s,r){if(s||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.tail;!(!this.isValidIndex(e)||((t||!this.isStale(e))&&(yield e),e===this.head));)e=this.prev[e]}*rindexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.head;!(!this.isValidIndex(e)||((t||!this.isStale(e))&&(yield e),e===this.tail));)e=this.next[e]}isValidIndex(t){return t!==void 0&&this.keyMap.get(this.keyList[t])===t}*entries(){for(let t of this.indexes())this.valList[t]!==void 0&&this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield[this.keyList[t],this.valList[t]])}*rentries(){for(let t of this.rindexes())this.valList[t]!==void 0&&this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield[this.keyList[t],this.valList[t]])}*keys(){for(let t of this.indexes())this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.keyList[t])}*rkeys(){for(let t of this.rindexes())this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.keyList[t])}*values(){for(let t of this.indexes())this.valList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.valList[t])}*rvalues(){for(let t of this.rindexes())this.valList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.valList[t])}[Symbol.iterator](){return this.entries()}find(t,e){for(let s of this.indexes()){let r=this.valList[s],n=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;if(n!==void 0&&t(n,this.keyList[s],this))return this.get(this.keyList[s],e)}}forEach(t,e=this){for(let s of this.indexes()){let r=this.valList[s],n=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.keyList[s],this)}}rforEach(t,e=this){for(let s of this.rindexes()){let r=this.valList[s],n=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.keyList[s],this)}}get prune(){return ft("prune","purgeStale"),this.purgeStale}purgeStale(){let t=!1;for(let e of this.rindexes({allowStale:!0}))this.isStale(e)&&(this.delete(this.keyList[e]),t=!0);return t}dump(){let t=[];for(let e of this.indexes({allowStale:!0})){let s=this.keyList[e],r=this.valList[e],n=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;if(n===void 0)continue;let o={value:n};if(this.ttls){o.ttl=this.ttls[e];let a=K.now()-this.starts[e];o.start=Math.floor(Date.now()-a)}this.sizes&&(o.size=this.sizes[e]),t.unshift([s,o])}return t}load(t){this.clear();for(let[e,s]of t){if(s.start){let r=Date.now()-s.start;s.start=K.now()-r}this.set(e,s.value,s)}}dispose(t,e,s){}set(t,e,{ttl:s=this.ttl,start:r,noDisposeOnSet:n=this.noDisposeOnSet,size:o=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:p=this.noUpdateTTL,status:c}={}){if(o=this.requireSize(t,e,o,a),this.maxEntrySize&&o>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(t),this;let h=this.size===0?void 0:this.keyMap.get(t);if(h===void 0)h=this.newIndex(),this.keyList[h]=t,this.valList[h]=e,this.keyMap.set(t,h),this.next[this.tail]=h,this.prev[h]=this.tail,this.tail=h,this.size++,this.addItemSize(h,o,c),c&&(c.set="add"),p=!1;else{this.moveToTail(h);let y=this.valList[h];if(e!==y){if(this.isBackgroundFetch(y)?y.__abortController.abort(new Error("replaced")):n||(this.dispose(y,t,"set"),this.disposeAfter&&this.disposed.push([y,t,"set"])),this.removeItemSize(h),this.valList[h]=e,this.addItemSize(h,o,c),c){c.set="replace";let l=y&&this.isBackgroundFetch(y)?y.__staleWhileFetching:y;l!==void 0&&(c.oldValue=l)}}else c&&(c.set="update")}if(s!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),p||this.setItemTTL(h,s,r),this.statusTTL(c,h),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let t=this.valList[this.head];return this.evict(!0),t}}evict(t){let e=this.head,s=this.keyList[e],r=this.valList[e];return this.isBackgroundFetch(r)?r.__abortController.abort(new Error("evicted")):(this.dispose(r,s,"evict"),this.disposeAfter&&this.disposed.push([r,s,"evict"])),this.removeItemSize(e),t&&(this.keyList[e]=null,this.valList[e]=null,this.free.push(e)),this.head=this.next[e],this.keyMap.delete(s),this.size--,e}has(t,{updateAgeOnHas:e=this.updateAgeOnHas,status:s}={}){let r=this.keyMap.get(t);if(r!==void 0)if(this.isStale(r))s&&(s.has="stale",this.statusTTL(s,r));else return e&&this.updateItemAge(r),s&&(s.has="hit"),this.statusTTL(s,r),!0;else s&&(s.has="miss");return!1}peek(t,{allowStale:e=this.allowStale}={}){let s=this.keyMap.get(t);if(s!==void 0&&(e||!this.isStale(s))){let r=this.valList[s];return this.isBackgroundFetch(r)?r.__staleWhileFetching:r}}backgroundFetch(t,e,s,r){let n=e===void 0?void 0:this.valList[e];if(this.isBackgroundFetch(n))return n;let o=new it;s.signal&&s.signal.addEventListener("abort",()=>o.abort(s.signal.reason));let a={signal:o.signal,options:s,context:r},p=(d,S=!1)=>{let{aborted:$}=o.signal,u=s.ignoreFetchAbort&&d!==void 0;return s.status&&($&&!S?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,u&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),$&&!u&&!S?h(o.signal.reason):(this.valList[e]===l&&(d===void 0?l.__staleWhileFetching?this.valList[e]=l.__staleWhileFetching:this.delete(t):(s.status&&(s.status.fetchUpdated=!0),this.set(t,d,a.options))),d)},c=d=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=d),h(d)),h=d=>{let{aborted:S}=o.signal,$=S&&s.allowStaleOnFetchAbort,u=$||s.allowStaleOnFetchRejection,g=u||s.noDeleteOnFetchRejection;if(this.valList[e]===l&&(!g||l.__staleWhileFetching===void 0?this.delete(t):$||(this.valList[e]=l.__staleWhileFetching)),u)return s.status&&l.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),l.__staleWhileFetching;if(l.__returned===l)throw d},y=(d,S)=>{this.fetchMethod(t,n,a).then($=>d($),S),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(d(),s.allowStaleOnFetchAbort&&(d=$=>p($,!0)))})};s.status&&(s.status.fetchDispatched=!0);let l=new Promise(y).then(p,c);return l.__abortController=o,l.__staleWhileFetching=n,l.__returned=null,e===void 0?(this.set(t,l,{...a.options,status:void 0}),e=this.keyMap.get(t)):this.valList[e]=l,l}isBackgroundFetch(t){return t&&typeof t=="object"&&typeof t.then=="function"&&Object.prototype.hasOwnProperty.call(t,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(t,"__returned")&&(t.__returned===t||t.__returned===null)}async fetch(t,{allowStale:e=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:p=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:y=this.allowStaleOnFetchRejection,ignoreFetchAbort:l=this.ignoreFetchAbort,allowStaleOnFetchAbort:d=this.allowStaleOnFetchAbort,fetchContext:S=this.fetchContext,forceRefresh:$=!1,status:u,signal:g}={}){if(!this.fetchMethod)return u&&(u.fetch="get"),this.get(t,{allowStale:e,updateAgeOnGet:s,noDeleteOnStaleGet:r,status:u});let A={allowStale:e,updateAgeOnGet:s,noDeleteOnStaleGet:r,ttl:n,noDisposeOnSet:o,size:a,sizeCalculation:p,noUpdateTTL:c,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:d,ignoreFetchAbort:l,status:u,signal:g},P=this.keyMap.get(t);if(P===void 0){u&&(u.fetch="miss");let k=this.backgroundFetch(t,P,A,S);return k.__returned=k}else{let k=this.valList[P];if(this.isBackgroundFetch(k)){let G=e&&k.__staleWhileFetching!==void 0;return u&&(u.fetch="inflight",G&&(u.returnedStale=!0)),G?k.__staleWhileFetching:k.__returned=k}let C=this.isStale(P);if(!$&&!C)return u&&(u.fetch="hit"),this.moveToTail(P),s&&this.updateItemAge(P),this.statusTTL(u,P),k;let j=this.backgroundFetch(t,P,A,S),Y=j.__staleWhileFetching!==void 0,V=Y&&e;return u&&(u.fetch=Y&&C?"stale":"refresh",V&&C&&(u.returnedStale=!0)),V?j.__staleWhileFetching:j.__returned=j}}get(t,{allowStale:e=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:n}={}){let o=this.keyMap.get(t);if(o!==void 0){let a=this.valList[o],p=this.isBackgroundFetch(a);return this.statusTTL(n,o),this.isStale(o)?(n&&(n.get="stale"),p?(n&&(n.returnedStale=e&&a.__staleWhileFetching!==void 0),e?a.__staleWhileFetching:void 0):(r||this.delete(t),n&&(n.returnedStale=e),e?a:void 0)):(n&&(n.get="hit"),p?a.__staleWhileFetching:(this.moveToTail(o),s&&this.updateItemAge(o),a))}else n&&(n.get="miss")}connect(t,e){this.prev[e]=t,this.next[t]=e}moveToTail(t){t!==this.tail&&(t===this.head?this.head=this.next[t]:this.connect(this.prev[t],this.next[t]),this.connect(this.tail,t),this.tail=t)}get del(){return ft("del","delete"),this.delete}delete(t){let e=!1;if(this.size!==0){let s=this.keyMap.get(t);if(s!==void 0)if(e=!0,this.size===1)this.clear();else{this.removeItemSize(s);let r=this.valList[s];this.isBackgroundFetch(r)?r.__abortController.abort(new Error("deleted")):(this.dispose(r,t,"delete"),this.disposeAfter&&this.disposed.push([r,t,"delete"])),this.keyMap.delete(t),this.keyList[s]=null,this.valList[s]=null,s===this.tail?this.tail=this.prev[s]:s===this.head?this.head=this.next[s]:(this.next[this.prev[s]]=this.next[s],this.prev[this.next[s]]=this.prev[s]),this.size--,this.free.push(s)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return e}clear(){for(let t of this.rindexes({allowStale:!0})){let e=this.valList[t];if(this.isBackgroundFetch(e))e.__abortController.abort(new Error("deleted"));else{let s=this.keyList[t];this.dispose(e,s,"delete"),this.disposeAfter&&this.disposed.push([e,s,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return ft("reset","clear"),this.clear}get length(){return ne("length","size"),this.size}static get AbortController(){return it}static get AbortSignal(){return xt}};_t.exports=T});var Ot=J((Ce,Ft)=>{"use strict";var f=(...i)=>i.every(t=>t)?i.join(""):"",b=i=>i?encodeURIComponent(i):"",Tt=i=>i.toLowerCase().replace(/^\W+|\/|\W+$/g,"").replace(/\W+/g,"-"),oe={sshtemplate:({domain:i,user:t,project:e,committish:s})=>`git@${i}:${t}/${e}.git${f("#",s)}`,sshurltemplate:({domain:i,user:t,project:e,committish:s})=>`git+ssh://git@${i}/${t}/${e}.git${f("#",s)}`,edittemplate:({domain:i,user:t,project:e,committish:s,editpath:r,path:n})=>`https://${i}/${t}/${e}${f("/",r,"/",b(s||"HEAD"),"/",n)}`,browsetemplate:({domain:i,user:t,project:e,committish:s,treepath:r})=>`https://${i}/${t}/${e}${f("/",r,"/",b(s))}`,browsetreetemplate:({domain:i,user:t,project:e,committish:s,treepath:r,path:n,fragment:o,hashformat:a})=>`https://${i}/${t}/${e}/${r}/${b(s||"HEAD")}/${n}${f("#",a(o||""))}`,browseblobtemplate:({domain:i,user:t,project:e,committish:s,blobpath:r,path:n,fragment:o,hashformat:a})=>`https://${i}/${t}/${e}/${r}/${b(s||"HEAD")}/${n}${f("#",a(o||""))}`,docstemplate:({domain:i,user:t,project:e,treepath:s,committish:r})=>`https://${i}/${t}/${e}${f("/",s,"/",b(r))}#readme`,httpstemplate:({auth:i,domain:t,user:e,project:s,committish:r})=>`git+https://${f(i,"@")}${t}/${e}/${s}.git${f("#",r)}`,filetemplate:({domain:i,user:t,project:e,committish:s,path:r})=>`https://${i}/${t}/${e}/raw/${b(s||"HEAD")}/${r}`,shortcuttemplate:({type:i,user:t,project:e,committish:s})=>`${i}:${t}/${e}${f("#",s)}`,pathtemplate:({user:i,project:t,committish:e})=>`${i}/${t}${f("#",e)}`,bugstemplate:({domain:i,user:t,project:e})=>`https://${i}/${t}/${e}/issues`,hashformat:Tt},E={};E.github={protocols:["git:","http:","git+ssh:","git+https:","ssh:","https:"],domain:"github.com",treepath:"tree",blobpath:"blob",editpath:"edit",filetemplate:({auth:i,user:t,project:e,committish:s,path:r})=>`https://${f(i,"@")}raw.githubusercontent.com/${t}/${e}/${b(s||"HEAD")}/${r}`,gittemplate:({auth:i,domain:t,user:e,project:s,committish:r})=>`git://${f(i,"@")}${t}/${e}/${s}.git${f("#",r)}`,tarballtemplate:({domain:i,user:t,project:e,committish:s})=>`https://codeload.${i}/${t}/${e}/tar.gz/${b(s||"HEAD")}`,extract:i=>{let[,t,e,s,r]=i.pathname.split("/",5);if(!(s&&s!=="tree")&&(s||(r=i.hash.slice(1)),e&&e.endsWith(".git")&&(e=e.slice(0,-4)),!(!t||!e)))return{user:t,project:e,committish:r}}};E.bitbucket={protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"bitbucket.org",treepath:"src",blobpath:"src",editpath:"?mode=edit",edittemplate:({domain:i,user:t,project:e,committish:s,treepath:r,path:n,editpath:o})=>`https://${i}/${t}/${e}${f("/",r,"/",b(s||"HEAD"),"/",n,o)}`,tarballtemplate:({domain:i,user:t,project:e,committish:s})=>`https://${i}/${t}/${e}/get/${b(s||"HEAD")}.tar.gz`,extract:i=>{let[,t,e,s]=i.pathname.split("/",4);if(!["get"].includes(s)&&(e&&e.endsWith(".git")&&(e=e.slice(0,-4)),!(!t||!e)))return{user:t,project:e,committish:i.hash.slice(1)}}};E.gitlab={protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"gitlab.com",treepath:"tree",blobpath:"tree",editpath:"-/edit",httpstemplate:({auth:i,domain:t,user:e,project:s,committish:r})=>`git+https://${f(i,"@")}${t}/${e}/${s}.git${f("#",r)}`,tarballtemplate:({domain:i,user:t,project:e,committish:s})=>`https://${i}/${t}/${e}/repository/archive.tar.gz?ref=${b(s||"HEAD")}`,extract:i=>{let t=i.pathname.slice(1);if(t.includes("/-/")||t.includes("/archive.tar.gz"))return;let e=t.split("/"),s=e.pop();s.endsWith(".git")&&(s=s.slice(0,-4));let r=e.join("/");if(!(!r||!s))return{user:r,project:s,committish:i.hash.slice(1)}}};E.gist={protocols:["git:","git+ssh:","git+https:","ssh:","https:"],domain:"gist.github.com",editpath:"edit",sshtemplate:({domain:i,project:t,committish:e})=>`git@${i}:${t}.git${f("#",e)}`,sshurltemplate:({domain:i,project:t,committish:e})=>`git+ssh://git@${i}/${t}.git${f("#",e)}`,edittemplate:({domain:i,user:t,project:e,committish:s,editpath:r})=>`https://${i}/${t}/${e}${f("/",b(s))}/${r}`,browsetemplate:({domain:i,project:t,committish:e})=>`https://${i}/${t}${f("/",b(e))}`,browsetreetemplate:({domain:i,project:t,committish:e,path:s,hashformat:r})=>`https://${i}/${t}${f("/",b(e))}${f("#",r(s))}`,browseblobtemplate:({domain:i,project:t,committish:e,path:s,hashformat:r})=>`https://${i}/${t}${f("/",b(e))}${f("#",r(s))}`,docstemplate:({domain:i,project:t,committish:e})=>`https://${i}/${t}${f("/",b(e))}`,httpstemplate:({domain:i,project:t,committish:e})=>`git+https://${i}/${t}.git${f("#",e)}`,filetemplate:({user:i,project:t,committish:e,path:s})=>`https://gist.githubusercontent.com/${i}/${t}/raw${f("/",b(e))}/${s}`,shortcuttemplate:({type:i,project:t,committish:e})=>`${i}:${t}${f("#",e)}`,pathtemplate:({project:i,committish:t})=>`${i}${f("#",t)}`,bugstemplate:({domain:i,project:t})=>`https://${i}/${t}`,gittemplate:({domain:i,project:t,committish:e})=>`git://${i}/${t}.git${f("#",e)}`,tarballtemplate:({project:i,committish:t})=>`https://codeload.github.com/gist/${i}/tar.gz/${b(t||"HEAD")}`,extract:i=>{let[,t,e,s]=i.pathname.split("/",4);if(s!=="raw"){if(!e){if(!t)return;e=t,t=null}return e.endsWith(".git")&&(e=e.slice(0,-4)),{user:t,project:e,committish:i.hash.slice(1)}}},hashformat:function(i){return i&&"file-"+Tt(i)}};E.sourcehut={protocols:["git+ssh:","https:"],domain:"git.sr.ht",treepath:"tree",blobpath:"tree",filetemplate:({domain:i,user:t,project:e,committish:s,path:r})=>`https://${i}/${t}/${e}/blob/${b(s)||"HEAD"}/${r}`,httpstemplate:({domain:i,user:t,project:e,committish:s})=>`https://${i}/${t}/${e}.git${f("#",s)}`,tarballtemplate:({domain:i,user:t,project:e,committish:s})=>`https://${i}/${t}/${e}/archive/${b(s)||"HEAD"}.tar.gz`,bugstemplate:({user:i,project:t})=>`https://todo.sr.ht/${i}/${t}`,extract:i=>{let[,t,e,s]=i.pathname.split("/",4);if(!["archive"].includes(s)&&(e&&e.endsWith(".git")&&(e=e.slice(0,-4)),!(!t||!e)))return{user:t,project:e,committish:i.hash.slice(1)}}};for(let[i,t]of Object.entries(E))E[i]=Object.assign({},oe,t);Ft.exports=E});var mt=J((De,It)=>{var ae=x("url"),gt=(i,t,e)=>{let s=i.indexOf(e);return i.lastIndexOf(t,s>-1?s:1/0)},Et=i=>{try{return new ae.URL(i)}catch{}},he=(i,t)=>{let e=i.indexOf(":"),s=i.slice(0,e+1);if(Object.prototype.hasOwnProperty.call(t,s))return i;let r=i.indexOf("@");return r>-1?r>e?`git+ssh://${i}`:i:i.indexOf("//")===e+1?i:`${i.slice(0,e+1)}//${i.slice(e+1)}`},le=i=>{let t=gt(i,"@","#"),e=gt(i,":","#");return e>t&&(i=i.slice(0,e)+"/"+i.slice(e+1)),gt(i,":","#")===-1&&i.indexOf("//")===-1&&(i=`git+ssh://${i}`),i};It.exports=(i,t)=>{let e=t?he(i,t):i;return Et(e)||Et(le(e))}});var Ct=J((Me,Ut)=>{"use strict";var ce=mt(),fe=i=>{let t=i.indexOf("#"),e=i.indexOf("/"),s=i.indexOf("/",e+1),r=i.indexOf(":"),n=/\s/.exec(i),o=i.indexOf("@"),a=!n||t>-1&&n.index>t,p=o===-1||t>-1&&o>t,c=r===-1||t>-1&&r>t,h=s===-1||t>-1&&s>t,y=e>0,l=t>-1?i[t-1]!=="/":!i.endsWith("/"),d=!i.startsWith(".");return a&&y&&l&&d&&p&&c&&h};Ut.exports=(i,t,{gitHosts:e,protocols:s})=>{var $,u;if(!i)return;let r=fe(i)?`github:${i}`:i,n=ce(r,s);if(!n)return;let o=e.byShortcut[n.protocol],a=e.byDomain[n.hostname.startsWith("www.")?n.hostname.slice(4):n.hostname],p=o||a;if(!p)return;let c=e[o||a],h=null;(($=s[n.protocol])==null?void 0:$.auth)&&(n.username||n.password)&&(h=`${n.username}${n.password?":"+n.password:""}`);let y=null,l=null,d=null,S=null;try{if(o){let g=n.pathname.startsWith("/")?n.pathname.slice(1):n.pathname,A=g.indexOf("@");A>-1&&(g=g.slice(A+1));let P=g.lastIndexOf("/");P>-1?(l=decodeURIComponent(g.slice(0,P)),l||(l=null),d=decodeURIComponent(g.slice(P+1))):d=decodeURIComponent(g),d.endsWith(".git")&&(d=d.slice(0,-4)),n.hash&&(y=decodeURIComponent(n.hash.slice(1))),S="shortcut"}else{if(!c.protocols.includes(n.protocol))return;let g=c.extract(n);if(!g)return;l=g.user&&decodeURIComponent(g.user),d=decodeURIComponent(g.project),y=decodeURIComponent(g.committish),S=((u=s[n.protocol])==null?void 0:u.name)||n.protocol.slice(0,-1)}}catch(g){if(g instanceof URIError)return;throw g}return[p,l,h,d,y,S,t]}});var Mt=J((We,Dt)=>{"use strict";var de=zt(),ue=Ot(),pe=Ct(),ge=mt(),yt=new de({max:1e3}),I,X,w,L,_=class{constructor(t,e,s,r,n,o,a={}){et(this,w);Object.assign(this,F(_,I)[t],{type:t,user:e,auth:s,project:r,committish:n,default:o,opts:a})}static addHost(t,e){F(_,I)[t]=e,F(_,I).byDomain[e.domain]=t,F(_,I).byShortcut[`${t}:`]=t,F(_,X)[`${t}:`]={name:t}}static fromUrl(t,e){if(typeof t!="string")return;let s=t+JSON.stringify(e||{});if(!yt.has(s)){let r=pe(t,e,{gitHosts:F(_,I),protocols:F(_,X)});yt.set(s,r?new _(...r):void 0)}return yt.get(s)}static parseUrl(t){return ge(t)}hash(){return this.committish?`#${this.committish}`:""}ssh(t){return v(this,w,L).call(this,this.sshtemplate,t)}sshurl(t){return v(this,w,L).call(this,this.sshurltemplate,t)}browse(t,...e){return typeof t!="string"?v(this,w,L).call(this,this.browsetemplate,t):typeof e[0]!="string"?v(this,w,L).call(this,this.browsetreetemplate,{...e[0],path:t}):v(this,w,L).call(this,this.browsetreetemplate,{...e[1],fragment:e[0],path:t})}browseFile(t,...e){return typeof e[0]!="string"?v(this,w,L).call(this,this.browseblobtemplate,{...e[0],path:t}):v(this,w,L).call(this,this.browseblobtemplate,{...e[1],fragment:e[0],path:t})}docs(t){return v(this,w,L).call(this,this.docstemplate,t)}bugs(t){return v(this,w,L).call(this,this.bugstemplate,t)}https(t){return v(this,w,L).call(this,this.httpstemplate,t)}git(t){return v(this,w,L).call(this,this.gittemplate,t)}shortcut(t){return v(this,w,L).call(this,this.shortcuttemplate,t)}path(t){return v(this,w,L).call(this,this.pathtemplate,t)}tarball(t){return v(this,w,L).call(this,this.tarballtemplate,{...t,noCommittish:!1})}file(t,e){return v(this,w,L).call(this,this.filetemplate,{...e,path:t})}edit(t,e){return v(this,w,L).call(this,this.edittemplate,{...e,path:t})}getDefaultRepresentation(){return this.default}toString(t){return this.default&&typeof this[this.default]=="function"?this[this.default](t):this.sshurl(t)}},H=_;I=new WeakMap,X=new WeakMap,w=new WeakSet,L=function(t,e){if(typeof t!="function")return null;let s={...this,...this.opts,...e};s.path||(s.path=""),s.path.startsWith("/")&&(s.path=s.path.slice(1)),s.noCommittish&&(s.committish=null);let r=t(s);return s.noGitPlus&&r.startsWith("git+")?r.slice(4):r},et(H,I,{byShortcut:{},byDomain:{}}),et(H,X,{"git+ssh:":{name:"sshurl"},"ssh:":{name:"sshurl"},"git+https:":{name:"https",auth:!0},"git:":{auth:!0},"http:":{auth:!0},"https:":{auth:!0},"git+http:":{auth:!0}});for(let[i,t]of Object.entries(ue))H.addHost(i,t);Dt.exports=H});var Te={};tt(Te,{default:()=>ze});var Gt=x("@yarnpkg/cli"),q=x("@yarnpkg/core"),W=x("clipanion");var m=x("@yarnpkg/core"),z=x("@yarnpkg/fslib"),qt=te(Mt());var $t={};tt($t,{fs:()=>be,getPackagePath:()=>me});var Wt=x("@yarnpkg/plugin-pnp"),rt=x("@yarnpkg/core"),nt=x("@yarnpkg/fslib"),jt=x("@yarnpkg/libzip");var R=()=>({os:[process.platform],cpu:[process.arch],libc:[]});var me=async(i,t)=>{if(ye(i),!rt.structUtils.isPackageCompatible(t,R()))return null;let e=rt.structUtils.convertPackageToLocator(t),s={name:rt.structUtils.stringifyIdent(e),reference:e.reference},r=bt.getPackageInformation(s);if(!r)return null;let{packageLocation:n}=r;return n},bt,ye=i=>{bt||(bt=module.require((0,Wt.getPnpPath)(i).cjs))},be=new nt.VirtualFS({baseFs:new nt.ZipOpenFS({libzip:(0,jt.getLibzipSync)(),readOnlyArchives:!0})});var wt={};tt(wt,{_getYarnStateAliases:()=>Rt,fs:()=>Se,getPackagePath:()=>$e});var D=x("@yarnpkg/core"),Nt=x("@yarnpkg/parsers"),U=x("@yarnpkg/fslib");var $e=async(i,t)=>{if(await we(i),!D.structUtils.isPackageCompatible(t,R()))return null;let e=D.structUtils.convertPackageToLocator(t),s=D.structUtils.stringifyLocator(e),r=ot[s]||Ht[s];if(!r)return null;let n=r.locations[0];return n?U.ppath.join(i.cwd,n):i.cwd},ot,Ht,we=async i=>{if(!ot){let t=U.ppath.join(i.configuration.projectCwd,U.Filename.nodeModules,".yarn-state.yml");ot=(0,Nt.parseSyml)(await U.xfs.readFilePromise(t,"utf8")),Ht=Rt(ot)}},Se=U.xfs,Rt=i=>Object.entries(i).reduce((t,[e,s])=>{if(!s.aliases)return t;let r=D.structUtils.parseLocator(e);for(let n of s.aliases){let o=D.structUtils.makeLocator(r,n),a=D.structUtils.stringifyLocator(o);t[a]=s}return t},{});var St={};tt(St,{fs:()=>Le,getPackagePath:()=>ve});var Q=x("@yarnpkg/core"),M=x("@yarnpkg/fslib");var ve=async(i,t)=>{if(!Q.structUtils.isPackageCompatible(t,R()))return null;let e=Q.structUtils.convertPackageToLocator(t),s=Q.structUtils.slugifyLocator(e),r=Q.structUtils.stringifyIdent(e),n=i.tryWorkspaceByLocator(e);return n?n.cwd:M.ppath.join(i.configuration.projectCwd,M.Filename.nodeModules,".store",s,M.Filename.nodeModules,r)},Le=M.xfs;var Bt=i=>{switch(i){case"pnp":return $t;case"node-modules":return wt;case"pnpm":return St;default:throw new Error("Unsupported linker")}};var ai=z.npath.basename(__dirname)==="@yarnpkg"?z.ppath.join(z.npath.toPortablePath(__dirname),"../.."):z.ppath.join(z.npath.toPortablePath(__dirname),".."),Yt=async(i,t,e,s)=>{let r={},o={children:{licenses:{children:r}}},a=await Pe(i,e,s),p=Bt(i.configuration.get("nodeLinker"));for(let[c,h]of a.entries()){let y=await p.getPackagePath(i,h);if(y===null)continue;let l=JSON.parse(await p.fs.readFilePromise(z.ppath.join(y,z.Filename.manifest),"utf8")),{license:d,url:S,vendorName:$,vendorUrl:u}=ke(l),g=m.structUtils.convertPackageToLocator(h),A=m.structUtils.stringifyLocator(m.structUtils.isVirtualLocator(g)?m.structUtils.devirtualizeLocator(g):g),C={children:{package:{value:m.formatUtils.tuple(m.formatUtils.Type.DEPENDENT,{locator:g,descriptor:c})},...S?{url:{value:m.formatUtils.tuple(m.formatUtils.Type.NO_HINT,vt("URL",S,t))}}:{},...$?{vendorName:{value:m.formatUtils.tuple(m.formatUtils.Type.NO_HINT,vt("VendorName",$,t))}}:{},...u?{vendorUrl:{value:m.formatUtils.tuple(m.formatUtils.Type.NO_HINT,vt("VendorUrl",u,t))}}:{},liscense:{value:m.formatUtils.tuple(m.formatUtils.Type.NO_HINT,d)}}};r[A]=C}return o},Pe=async(i,t,e)=>{let s=new Map,r;if(t){if(e){for(let p of i.workspaces)p.manifest.devDependencies.clear();let a=await m.Cache.find(i.configuration);await i.resolveEverything({report:new m.ThrowReport,cache:a})}r=i.storedDescriptors.values()}else r=i.workspaces.flatMap(a=>{let p=[a.anchoredDescriptor];for(let[c,h]of a.dependencies.entries())e&&a.manifest.devDependencies.has(c)||p.push(h);return p});let n=m.miscUtils.sortMap(r,[a=>m.structUtils.stringifyIdent(a),a=>m.structUtils.isVirtualDescriptor(a)?"0":"1",a=>a.range]),o=new Set;for(let a of n.values()){let p=i.storedResolutions.get(a.descriptorHash);if(!p)continue;let c=i.storedPackages.get(p);if(!c)continue;let{descriptorHash:h}=m.structUtils.isVirtualDescriptor(a)?m.structUtils.devirtualizeDescriptor(a):a;o.has(h)||(o.add(h),s.set(a,c))}return s};function xe(i){let t={},e=i.match(/^([^(<]+)/);if(e){let n=e[0].trim();n&&(t.name=n)}let s=i.match(/<([^>]+)>/);s&&(t.email=s[1]);let r=i.match(/\(([^)]+)\)/);return r&&(t.url=r[1]),t}var ke=i=>{let{license:t,licenses:e,repository:s,homepage:r,author:n}=i,o=typeof n=="string"?xe(n):n;return{license:(()=>{if(t)return at(t);if(e){if(!Array.isArray(e))return at(e);if(e.length===1)return at(e[0]);if(e.length>1)return`(${e.map(at).join(" OR ")})`}return Vt})(),url:Ae(s)||r,vendorName:o==null?void 0:o.name,vendorUrl:r||(o==null?void 0:o.url)}},Vt="UNKNOWN",at=i=>(typeof i!="string"?i.type:i)||Vt,Ae=i=>{let t=typeof i=="string"?i:i==null?void 0:i.url;if(!t)return t;let e=qt.fromUrl(t);return!e||e.getDefaultRepresentation()!=="shortcut"?t:e.https()},vt=(i,t,e)=>e?t:`${i}: ${t}`;var B=class extends W.Command{constructor(){super(...arguments);this.recursive=W.Option.Boolean("-R,--recursive",!1,{description:"Include transitive dependencies (dependencies of direct dependencies)"});this.production=W.Option.Boolean("--production",!1,{description:"Exclude development dependencies"});this.json=W.Option.Boolean("--json",!1,{description:"Format output as JSON"})}async execute(){let e=await q.Configuration.find(this.context.cwd,this.context.plugins),{project:s,workspace:r}=await q.Project.find(e,this.context.cwd);if(!r)throw new Gt.WorkspaceRequiredError(s.cwd,this.context.cwd);await s.restoreInstallState();let n=await Yt(s,this.json,this.recursive,this.production);q.treeUtils.emitTree(n,{configuration:e,stdout:this.context.stdout,json:this.json,separators:1})}};B.paths=[["licenses","list"]],B.usage=W.Command.Usage({description:"display the licenses for all packages in the project",details:`
      This command prints the license information for packages in the project. By default, only direct dependencies are listed.

      If \`-R,--recursive\` is set, the listing will include transitive dependencies (dependencies of direct dependencies).

      If \`--production\` is set, the listing will exclude development dependencies.
    `,examples:[["List all licenses of direct dependencies","$0 licenses list"],["List all licenses of direct and transitive dependencies","$0 licenses list --recursive"],["List all licenses of production dependencies only","$0 licenses list --production"]]});var _e={commands:[B]},ze=_e;return ee(Te);})();
return plugin;
}
};
