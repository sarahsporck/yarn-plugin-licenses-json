/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-licenses",
factory: function (require) {
"use strict";var plugin=(()=>{var te=Object.create;var Z=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var se=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var $=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,s)=>(typeof require<"u"?require:t)[s]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var H=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),tt=(e,t)=>{for(var s in t)Z(e,s,{get:t[s],enumerable:!0})},wt=(e,t,s,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of se(t))!re.call(e,r)&&r!==s&&Z(e,r,{get:()=>t[r],enumerable:!(i=ee(t,r))||i.enumerable});return e};var $t=(e,t,s)=>(s=e!=null?te(ie(e)):{},wt(t||!e||!e.__esModule?Z(s,"default",{value:e,enumerable:!0}):s,e)),ne=e=>wt(Z({},"__esModule",{value:!0}),e);var Et=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var T=(e,t,s)=>(Et(e,t,"read from private field"),s?s.call(e):t.get(e)),et=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)};var k=(e,t,s)=>(Et(e,t,"access private method"),s);var Lt=H((exports,module)=>{"use strict";(function(root){var performance=(typeof window=="object"?window:$("perf_hooks")).performance,BREAK=`\r
`,SPACE=" ",OPTIONS={indent:2,isExpand:!0,isStrict:!1,isEscape:!1,isUnscape:!1,keyQtMark:'"',valQtMark:'"'},ESCAPES_MAP=[{ptn:/\r\n/gm,str:""},{ptn:/\n\r/gm,str:""},{ptn:/\n/gm,str:"\\n"},{ptn:/\r/gm,str:"\\r"},{ptn://gm,str:"\\b"},{ptn://gm,str:"\\v"},{ptn:/\f/gm,str:"\\f"},{ptn:/\t/gm,str:"\\t"}],MESSAGES_MAP={err:function(){return"Parse Error, an excessive abnormal Json!"},war:function(t){return"Formated ".concat(t," lines, abnormal JSON source!")},scc:function(t){return"Success formated ".concat(t," lines!")},val:function(t){return"Invalid value in line: ".concat(t)},ost:function(t){return"Expect a string in line: ".concat(t)},col:function(t){return"Expect a colon in line: ".concat(t)},end:function(t,s){return'Expect a comma or a "'.concat(s,'" in line: ').concat(t)}};function fmt2json(source,options){var startTime=performance.now(),fmtSource=source,curLevel=0,curIndex=1,exceptType="",exceptSign="",signsQueue="",baseIndent="",isSrcValid=!0,isFmtError=!1,withDetails=!1,fmtResult="",fmtType="info",fmtSign="",fmtLines=0,message="",errFormat=!1,errNear="",errIndex=NaN,errExpect="",fmtOptions=Object.assign({},OPTIONS);options&&(typeof options.withDetails=="boolean"&&(withDetails=options.withDetails),typeof options.expand=="boolean"&&(fmtOptions.isExpand=options.expand),typeof options.strict=="boolean"&&(fmtOptions.isStrict=options.strict),typeof options.escape=="boolean"&&(fmtOptions.isEscape=options.escape),typeof options.unscape=="boolean"&&(fmtOptions.isUnscape=options.unscape),typeof options.indent=="number"&&options.indent>0&&(fmtOptions.indent=options.indent),["'",'"',""].indexOf(options.keyQtMark)>-1&&(fmtOptions.keyQtMark=options.keyQtMark),["'",'"'].indexOf(options.valQtMark)>-1&&(fmtOptions.valQtMark=options.valQtMark)),baseIndent=getBaseIndent();try{try{fmtSource!==""&&eval("fmtSource = ".concat(fmtSource)),fmtSource===""||["object","boolean"].indexOf(typeof fmtSource)>-1?doNormalFormat(fmtSource):(fmtOptions.isUnscape&&(fmtSource=fmtSource.replace(/\\"/gm,'"').replace(/\\\\/gm,"\\")),doSpecialFormat())}catch(e){fmtOptions.isUnscape&&(fmtSource=fmtSource.replace(/\\"/gm,'"').replace(/\\\\/gm,"\\")),doSpecialFormat()}}catch(e){isFmtError=!0}finally{return setFmtStatus(),withDetails?{result:fmtResult,fmtType,fmtSign,fmtLines,fmtTime:performance.now()-startTime,message,errFormat,errIndex,errNear,errExpect}:fmtResult}function doNormalFormat(e){if([!0,!1,null,""].indexOf(e)>-1)return fmtResult+=String(e);fmtOptions.isStrict&&(e=JSON.parse(JSON.stringify(e))),e instanceof Array?arrayHandler(e):objectHandler(e)}function arrayHandler(e){var t;if(e.length>0){fmtResult+=brkLine4Normal("["),fmtOptions.isExpand&&curIndex++,curLevel++;for(var s=0;s<e.length;s++)t=fmtOptions.isExpand?getCurIndent():"",fmtResult+=t,valueHandler(e[s]),fmtResult+=brkLine4Normal(s<e.length-1?",":"");curLevel--,t=fmtOptions.isExpand?getCurIndent():"",fmtResult+=t+"]"}else fmtResult+="[]"}function objectHandler(e){var t=Object.keys(e);if(t.length>0){var s,i=0;fmtResult+=brkLine4Normal("{"),curLevel++;for(var r in e){i++;var n=quoteNormalStr(r,fmtOptions.keyQtMark);s=fmtOptions.isExpand?getCurIndent():"",fmtResult+=s,fmtResult+=n,fmtResult+=fmtOptions.isExpand?": ":":",valueHandler(e[r]),fmtResult+=brkLine4Normal(i<t.length?",":"")}curLevel--,s=fmtOptions.isExpand?getCurIndent():"",fmtResult+=s+"}"}else fmtResult+="{}"}function valueHandler(e){switch(typeof e){case"undefined":case"function":return fmtResult+=String(e);case"number":case"boolean":return fmtResult+=e;case"object":return doNormalFormat(e);case"string":return fmtResult+=quoteNormalStr(e,fmtOptions.valQtMark)}}function doSpecialFormat(){if(fmtSource=fmtSource.replace(/^\s*/,""),fmtSource.length!==0){var e=!1;switch(fmtSource[0]){case"'":case'"':e=!0,quotaHandler();break;case":":e=!0,colonHandler();break;case",":e=!0,commaHandler();break;case"{":e=!0,objPreHandler();break;case"}":e=!0,objEndHandler();break;case"[":e=!0,arrPreHandler();break;case"]":e=!0,arrEndHandler();break;case"(":e=!0,tupPreHandler();break;case")":e=!0,tupEndHandler();break}if(!e){var t=fmtSource.match(/^u(\s)?'|^u(\s)?"/);t&&(e=!0,unicHandler(t[0]))}if(!e){var s=fmtSource.match(/^(-?[0-9]+\.?[0-9]*|0[xX][0-9a-fA-F]+)/);s&&(e=!0,numbHandler(s[0]))}if(!e){var i=fmtSource.match(/^(true|false|True|False)/);i&&(e=!0,boolHandler(i[0]))}if(!e){var r=fmtSource.match(/^(null|undefined|None|NaN)/);r&&(e=!0,nullHandler(r[0]))}return e||otheHandler(),doSpecialFormat()}}function quotaHandler(){var e=getSrcRest(),t=getNextQuotaIndex(fmtSource[0],e);chkFmtExpect(fmtSource[0]);var s=fmtSource.substr(0,1),i=exceptType==="ost",r="";t>-1?(r=fmtSource.substr(1,t),fmtResult+=quoteSpecialStr(r,s,i),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest(t+2)):(r=fmtSource.substr(1),fmtResult+=quoteSpecialStr(r,s,i),setFmtExpect("!"),fmtSource="")}function colonHandler(){fmtResult+=fmtOptions.isExpand?": ":":",chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest()}function commaHandler(){var e=getCurIndent();fmtOptions.isExpand&&curIndex++,fmtResult+=fmtOptions.isExpand?",".concat(BREAK+e):",",chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest(),fmtSource.replace(/(\r)?\n|\s/gm,"")===""&&setFmtError("val")}function objPreHandler(){chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource[1]&&fmtSource[1]==="}"?(fmtResult+="{}",setFmtExpect("}"),fmtSource=getSrcRest(2)):(curLevel++,fmtResult+="{",brkLine4Special(),fmtSource=getSrcRest())}function objEndHandler(){curLevel--,brkLine4Special("}"),chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest()}function arrPreHandler(){chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource[1]&&fmtSource[1]==="]"?(fmtResult+="[]",setFmtExpect("]"),fmtSource=getSrcRest(2)):(curLevel++,fmtResult+="[",brkLine4Special(),fmtSource=getSrcRest())}function arrEndHandler(){curLevel--,brkLine4Special("]"),chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest()}function tupPreHandler(){chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource[1]&&fmtSource[1]===")"?(fmtResult+=fmtOptions.isStrict?"[]":"()",setFmtExpect(")"),fmtSource=getSrcRest(2)):(curLevel++,fmtResult+=fmtOptions.isStrict?"[":"(",brkLine4Special(),fmtSource=getSrcRest())}function tupEndHandler(){curLevel--,brkLine4Special(fmtOptions.isStrict?"]":")"),chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest()}function unicHandler(e){var t=getSrcRest(e.length),s=e.indexOf("'")>-1?getNextQuotaIndex("'",t):getNextQuotaIndex('"',t);chkFmtExpect("u");var i=exceptType==="ost",r="";if(s>-1){var n=s+e.length+1;r=fmtSource.substr(e.length,n-e.length-1),fmtResult+=quoteSpecialStr(r,e,i),setFmtExpect("u"),fmtSource=getSrcRest(n)}else r=fmtSource.substr(e.length),fmtResult+=quoteSpecialStr(r,e,i),setFmtExpect("!"),fmtSource=""}function numbHandler(e){fmtResult+=e,chkFmtExpect("n"),setFmtExpect("n"),fmtSource=getSrcRest(e.length)}function boolHandler(e){fmtResult+=fmtOptions.isStrict?e.toLowerCase():e,chkFmtExpect("b"),setFmtExpect("b"),fmtSource=getSrcRest(e.length)}function nullHandler(e){fmtResult+=fmtOptions.isStrict?"null":e,chkFmtExpect("N"),setFmtExpect("N"),fmtSource=getSrcRest(e.length)}function otheHandler(){var e=fmtSource.match(/^[^\{\}\[\]\(\):,]*/),t=e&&e[0]||"";t&&(fmtResult+=t,chkFmtExpect("!"),fmtSource=getSrcRest(t.length))}function chkFmtExpect(e){if(isSrcValid)switch(exceptType){case"val":":,}])!".indexOf(e)>-1&&setFmtError("val");break;case"ost":`'"unbN`.indexOf(e)===-1&&setFmtError("ost");break;case"end":var t=getBracketPair(exceptSign);[",",t].indexOf(e)===-1&&setFmtError("end",t);break;case"col":e!==":"&&setFmtError("col");break}}function setFmtExpect(e){switch(e){case":":exceptType="val";break;case",":exceptSign==="{"?exceptType="ost":exceptType="val";break;case"{":exceptSign=e,signsQueue+=e,exceptType="ost";break;case"}":signsQueue=signsQueue.substr(0,signsQueue.length-1),exceptSign=signsQueue.substr(-1),exceptType="end";break;case"[":exceptSign=e,signsQueue+=e,exceptType="val";break;case"]":signsQueue=signsQueue.substr(0,signsQueue.length-1),exceptSign=signsQueue.substr(-1),exceptType="end";break;case"(":exceptSign=e,signsQueue+=e,exceptType="val";break;case")":signsQueue=signsQueue.substr(0,signsQueue.length-1),exceptSign=signsQueue.substr(-1),exceptType="end";break;case"u":case"n":case"b":case"N":case'"':case"'":exceptType==="ost"?exceptType="col":exceptType="end";break}}function setFmtError(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";switch(e){case"war":fmtType="warning";break;case"scc":fmtType="success";break;default:fmtType="danger";break}if(["ost","col","val","end"].indexOf(e)>-1){errFormat=!0,isSrcValid=!1,errExpect=t,errIndex=curIndex;var s=fmtResult.substr(-20).replace(/^(\s|\n|\r\n)*/,"").replace(/(\n|\r\n)/gm,"\\n"),i=fmtSource.substr(0,10).replace(/(\s|\n|\r\n)*$/,"").replace(/(\n|\r\n)/gm,"\\n");errNear="...".concat(s,">>>>>>").concat(i)}fmtSign=e,message=MESSAGES_MAP[e](curIndex,t)}function setFmtStatus(){if(isFmtError&&!errIndex)setFmtError("err"),errFormat=!0;else if(isSrcValid)if(signsQueue){var e=getBracketPair(signsQueue.substr(-1));setFmtError("end",e)}else setFmtError("scc");fmtLines=curIndex}function brkLine4Normal(e){return fmtOptions.isExpand?(curIndex++,e+BREAK):e}function brkLine4Special(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(!fmtOptions.isExpand)return fmtResult+=e;curIndex++,fmtResult+=BREAK+getCurIndent()+e}function quoteNormalStr(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=fmtOptions.isEscape&&fmtOptions.keyQtMark==='"'&&t==='"'&&(!s||fmtOptions.isStrict);e=s?e.replace(/(?!\\[b|f|n|\\|r|t|x|v|'|"|0])\\/gm,"\\\\"):e.replace(/\\/gm,"\\\\"),ESCAPES_MAP.forEach(function(n){return e=e.replace(n.ptn,n.str)});var r=i?"\\".concat(t):t;switch(i&&(e=e.replace(/\\/gm,"\\\\")),t){case'"':return e=i?e.replace(/"/gm,'\\\\\\"'):e.replace(/"/gm,'\\"'),r+e+r;case"'":return e=e.replace(/'/gm,"\\'"),r+e+r;default:return e}}function quoteSpecialStr(e,t,s){var i=s?fmtOptions.keyQtMark:fmtOptions.valQtMark;return e=e.replace(/(?!\\[b|f|n|\\|r|t|x|v|'|"|0])\\/gm,""),e=e.replace(/\\\"/gm,'"'),e=e.replace(/\\\'/gm,"'"),e=quoteNormalStr(e,i,!0),!fmtOptions.isStrict&&t.length>1&&(e=t.substr(0,t.length-1)+e),e}function getSrcRest(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return fmtSource.length>e?fmtSource.substr(e):""}function getNextQuotaIndex(e,t){for(var s=0;s<t.length;s++)if(t[s]===e&&(s===0||t[s-1]!=="\\"||t[s-1]==="\\"&&t[s-2]==="\\"&&t[s-3]!=="\\"))return s;return-1}function getBaseIndent(){for(var e="",t=0;t<fmtOptions.indent;t++)e+=SPACE;return e}function getCurIndent(){for(var e="",t=0;t<curLevel;t++)e+=baseIndent;return e}function getBracketPair(e){var t=["{","[","("],s=["}","]",")"],i=t.indexOf(e),r=s.indexOf(e);return i>-1?s[i]:t[r]}}typeof define=="function"&&define.amd?define(function(){return fmt2json}):typeof exports=="object"?module.exports=fmt2json:root.fmt2json=fmt2json})(exports)});var Pt=H((He,Ft)=>{Ft.exports=Lt()});var Rt=H((Ue,_t)=>{var K=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,oe=typeof AbortController=="function",st=oe?AbortController:class{constructor(){this.signal=new Ot}abort(t=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||t,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},ae=typeof AbortSignal=="function",ce=typeof st.AbortSignal=="function",Ot=ae?AbortSignal:ce?st.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(t){t.type==="abort"&&(this.aborted=!0,this.onabort(t),this._listeners.forEach(s=>s(t),this))}onabort(){}addEventListener(t,s){t==="abort"&&this._listeners.push(s)}removeEventListener(t,s){t==="abort"&&(this._listeners=this._listeners.filter(i=>i!==s))}},pt=new Set,ht=(e,t)=>{let s=`LRU_CACHE_OPTION_${e}`;it(s)&&dt(s,`${e} option`,`options.${t}`,A)},ft=(e,t)=>{let s=`LRU_CACHE_METHOD_${e}`;if(it(s)){let{prototype:i}=A,{get:r}=Object.getOwnPropertyDescriptor(i,e);dt(s,`${e} method`,`cache.${t}()`,r)}},le=(e,t)=>{let s=`LRU_CACHE_PROPERTY_${e}`;if(it(s)){let{prototype:i}=A,{get:r}=Object.getOwnPropertyDescriptor(i,e);dt(s,`${e} property`,`cache.${t}`,r)}},At=(...e)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...e):console.error(...e)},it=e=>!pt.has(e),dt=(e,t,s,i)=>{pt.add(e);let r=`The ${t} is deprecated. Please use ${s} instead.`;At(r,"DeprecationWarning",e,i)},_=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),Tt=e=>_(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?W:null:null,W=class extends Array{constructor(t){super(t),this.fill(0)}},ut=class{constructor(t){if(t===0)return[];let s=Tt(t);this.heap=new s(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},A=class{constructor(t={}){let{max:s=0,ttl:i,ttlResolution:r=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:u,dispose:h,disposeAfter:c,noDisposeOnSet:S,noUpdateTTL:l,maxSize:p=0,maxEntrySize:v=0,sizeCalculation:y,fetchMethod:d,fetchContext:m,noDeleteOnFetchRejection:F,noDeleteOnStaleGet:E,allowStaleOnFetchRejection:L,allowStaleOnFetchAbort:N,ignoreFetchAbort:D}=t,{length:Y,maxAge:J,stale:G}=t instanceof A?{}:t;if(s!==0&&!_(s))throw new TypeError("max option must be a nonnegative integer");let ct=s?Tt(s):Array;if(!ct)throw new Error("invalid max value: "+s);if(this.max=s,this.maxSize=p,this.maxEntrySize=v||this.maxSize,this.sizeCalculation=y||Y,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=d||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=m,!this.fetchMethod&&m!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(s).fill(null),this.valList=new Array(s).fill(null),this.next=new ct(s),this.prev=new ct(s),this.head=0,this.tail=0,this.free=new ut(s),this.initialFill=1,this.size=0,typeof h=="function"&&(this.dispose=h),typeof c=="function"?(this.disposeAfter=c,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!S,this.noUpdateTTL=!!l,this.noDeleteOnFetchRejection=!!F,this.allowStaleOnFetchRejection=!!L,this.allowStaleOnFetchAbort=!!N,this.ignoreFetchAbort=!!D,this.maxEntrySize!==0){if(this.maxSize!==0&&!_(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!_(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!u||!!G,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=_(r)||r===0?r:1,this.ttlAutopurge=!!n,this.ttl=i||J||0,this.ttl){if(!_(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let lt="LRU_CACHE_UNBOUNDED";it(lt)&&(pt.add(lt),At("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",lt,A))}G&&ht("stale","allowStale"),J&&ht("maxAge","ttl"),Y&&ht("length","sizeCalculation")}getRemainingTTL(t){return this.has(t,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new W(this.max),this.starts=new W(this.max),this.setItemTTL=(i,r,n=K.now())=>{if(this.starts[i]=r!==0?n:0,this.ttls[i]=r,r!==0&&this.ttlAutopurge){let o=setTimeout(()=>{this.isStale(i)&&this.delete(this.keyList[i])},r+1);o.unref&&o.unref()}},this.updateItemAge=i=>{this.starts[i]=this.ttls[i]!==0?K.now():0},this.statusTTL=(i,r)=>{i&&(i.ttl=this.ttls[r],i.start=this.starts[r],i.now=t||s(),i.remainingTTL=i.now+i.ttl-i.start)};let t=0,s=()=>{let i=K.now();if(this.ttlResolution>0){t=i;let r=setTimeout(()=>t=0,this.ttlResolution);r.unref&&r.unref()}return i};this.getRemainingTTL=i=>{let r=this.keyMap.get(i);return r===void 0?0:this.ttls[r]===0||this.starts[r]===0?1/0:this.starts[r]+this.ttls[r]-(t||s())},this.isStale=i=>this.ttls[i]!==0&&this.starts[i]!==0&&(t||s())-this.starts[i]>this.ttls[i]}updateItemAge(t){}statusTTL(t,s){}setItemTTL(t,s,i){}isStale(t){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new W(this.max),this.removeItemSize=t=>{this.calculatedSize-=this.sizes[t],this.sizes[t]=0},this.requireSize=(t,s,i,r)=>{if(this.isBackgroundFetch(s))return 0;if(!_(i))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(i=r(s,t),!_(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.addItemSize=(t,s,i)=>{if(this.sizes[t]=s,this.maxSize){let r=this.maxSize-this.sizes[t];for(;this.calculatedSize>r;)this.evict(!0)}this.calculatedSize+=this.sizes[t],i&&(i.entrySize=s,i.totalCalculatedSize=this.calculatedSize)}}removeItemSize(t){}addItemSize(t,s){}requireSize(t,s,i,r){if(i||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:t=this.allowStale}={}){if(this.size)for(let s=this.tail;!(!this.isValidIndex(s)||((t||!this.isStale(s))&&(yield s),s===this.head));)s=this.prev[s]}*rindexes({allowStale:t=this.allowStale}={}){if(this.size)for(let s=this.head;!(!this.isValidIndex(s)||((t||!this.isStale(s))&&(yield s),s===this.tail));)s=this.next[s]}isValidIndex(t){return t!==void 0&&this.keyMap.get(this.keyList[t])===t}*entries(){for(let t of this.indexes())this.valList[t]!==void 0&&this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield[this.keyList[t],this.valList[t]])}*rentries(){for(let t of this.rindexes())this.valList[t]!==void 0&&this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield[this.keyList[t],this.valList[t]])}*keys(){for(let t of this.indexes())this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.keyList[t])}*rkeys(){for(let t of this.rindexes())this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.keyList[t])}*values(){for(let t of this.indexes())this.valList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.valList[t])}*rvalues(){for(let t of this.rindexes())this.valList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.valList[t])}[Symbol.iterator](){return this.entries()}find(t,s){for(let i of this.indexes()){let r=this.valList[i],n=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;if(n!==void 0&&t(n,this.keyList[i],this))return this.get(this.keyList[i],s)}}forEach(t,s=this){for(let i of this.indexes()){let r=this.valList[i],n=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(s,n,this.keyList[i],this)}}rforEach(t,s=this){for(let i of this.rindexes()){let r=this.valList[i],n=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(s,n,this.keyList[i],this)}}get prune(){return ft("prune","purgeStale"),this.purgeStale}purgeStale(){let t=!1;for(let s of this.rindexes({allowStale:!0}))this.isStale(s)&&(this.delete(this.keyList[s]),t=!0);return t}dump(){let t=[];for(let s of this.indexes({allowStale:!0})){let i=this.keyList[s],r=this.valList[s],n=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;if(n===void 0)continue;let o={value:n};if(this.ttls){o.ttl=this.ttls[s];let a=K.now()-this.starts[s];o.start=Math.floor(Date.now()-a)}this.sizes&&(o.size=this.sizes[s]),t.unshift([i,o])}return t}load(t){this.clear();for(let[s,i]of t){if(i.start){let r=Date.now()-i.start;i.start=K.now()-r}this.set(s,i.value,i)}}dispose(t,s,i){}set(t,s,{ttl:i=this.ttl,start:r,noDisposeOnSet:n=this.noDisposeOnSet,size:o=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,status:h}={}){if(o=this.requireSize(t,s,o,a),this.maxEntrySize&&o>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),this.delete(t),this;let c=this.size===0?void 0:this.keyMap.get(t);if(c===void 0)c=this.newIndex(),this.keyList[c]=t,this.valList[c]=s,this.keyMap.set(t,c),this.next[this.tail]=c,this.prev[c]=this.tail,this.tail=c,this.size++,this.addItemSize(c,o,h),h&&(h.set="add"),u=!1;else{this.moveToTail(c);let S=this.valList[c];if(s!==S){if(this.isBackgroundFetch(S)?S.__abortController.abort(new Error("replaced")):n||(this.dispose(S,t,"set"),this.disposeAfter&&this.disposed.push([S,t,"set"])),this.removeItemSize(c),this.valList[c]=s,this.addItemSize(c,o,h),h){h.set="replace";let l=S&&this.isBackgroundFetch(S)?S.__staleWhileFetching:S;l!==void 0&&(h.oldValue=l)}}else h&&(h.set="update")}if(i!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),u||this.setItemTTL(c,i,r),this.statusTTL(h,c),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let t=this.valList[this.head];return this.evict(!0),t}}evict(t){let s=this.head,i=this.keyList[s],r=this.valList[s];return this.isBackgroundFetch(r)?r.__abortController.abort(new Error("evicted")):(this.dispose(r,i,"evict"),this.disposeAfter&&this.disposed.push([r,i,"evict"])),this.removeItemSize(s),t&&(this.keyList[s]=null,this.valList[s]=null,this.free.push(s)),this.head=this.next[s],this.keyMap.delete(i),this.size--,s}has(t,{updateAgeOnHas:s=this.updateAgeOnHas,status:i}={}){let r=this.keyMap.get(t);if(r!==void 0)if(this.isStale(r))i&&(i.has="stale",this.statusTTL(i,r));else return s&&this.updateItemAge(r),i&&(i.has="hit"),this.statusTTL(i,r),!0;else i&&(i.has="miss");return!1}peek(t,{allowStale:s=this.allowStale}={}){let i=this.keyMap.get(t);if(i!==void 0&&(s||!this.isStale(i))){let r=this.valList[i];return this.isBackgroundFetch(r)?r.__staleWhileFetching:r}}backgroundFetch(t,s,i,r){let n=s===void 0?void 0:this.valList[s];if(this.isBackgroundFetch(n))return n;let o=new st;i.signal&&i.signal.addEventListener("abort",()=>o.abort(i.signal.reason));let a={signal:o.signal,options:i,context:r},u=(p,v=!1)=>{let{aborted:y}=o.signal,d=i.ignoreFetchAbort&&p!==void 0;return i.status&&(y&&!v?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,d&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),y&&!d&&!v?c(o.signal.reason):(this.valList[s]===l&&(p===void 0?l.__staleWhileFetching?this.valList[s]=l.__staleWhileFetching:this.delete(t):(i.status&&(i.status.fetchUpdated=!0),this.set(t,p,a.options))),p)},h=p=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=p),c(p)),c=p=>{let{aborted:v}=o.signal,y=v&&i.allowStaleOnFetchAbort,d=y||i.allowStaleOnFetchRejection,m=d||i.noDeleteOnFetchRejection;if(this.valList[s]===l&&(!m||l.__staleWhileFetching===void 0?this.delete(t):y||(this.valList[s]=l.__staleWhileFetching)),d)return i.status&&l.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),l.__staleWhileFetching;if(l.__returned===l)throw p},S=(p,v)=>{this.fetchMethod(t,n,a).then(y=>p(y),v),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(p(),i.allowStaleOnFetchAbort&&(p=y=>u(y,!0)))})};i.status&&(i.status.fetchDispatched=!0);let l=new Promise(S).then(u,h);return l.__abortController=o,l.__staleWhileFetching=n,l.__returned=null,s===void 0?(this.set(t,l,{...a.options,status:void 0}),s=this.keyMap.get(t)):this.valList[s]=l,l}isBackgroundFetch(t){return t&&typeof t=="object"&&typeof t.then=="function"&&Object.prototype.hasOwnProperty.call(t,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(t,"__returned")&&(t.__returned===t||t.__returned===null)}async fetch(t,{allowStale:s=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:S=this.allowStaleOnFetchRejection,ignoreFetchAbort:l=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,fetchContext:v=this.fetchContext,forceRefresh:y=!1,status:d,signal:m}={}){if(!this.fetchMethod)return d&&(d.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:i,noDeleteOnStaleGet:r,status:d});let F={allowStale:s,updateAgeOnGet:i,noDeleteOnStaleGet:r,ttl:n,noDisposeOnSet:o,size:a,sizeCalculation:u,noUpdateTTL:h,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:p,ignoreFetchAbort:l,status:d,signal:m},E=this.keyMap.get(t);if(E===void 0){d&&(d.fetch="miss");let L=this.backgroundFetch(t,E,F,v);return L.__returned=L}else{let L=this.valList[E];if(this.isBackgroundFetch(L)){let G=s&&L.__staleWhileFetching!==void 0;return d&&(d.fetch="inflight",G&&(d.returnedStale=!0)),G?L.__staleWhileFetching:L.__returned=L}let N=this.isStale(E);if(!y&&!N)return d&&(d.fetch="hit"),this.moveToTail(E),i&&this.updateItemAge(E),this.statusTTL(d,E),L;let D=this.backgroundFetch(t,E,F,v),Y=D.__staleWhileFetching!==void 0,J=Y&&s;return d&&(d.fetch=Y&&N?"stale":"refresh",J&&N&&(d.returnedStale=!0)),J?D.__staleWhileFetching:D.__returned=D}}get(t,{allowStale:s=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:n}={}){let o=this.keyMap.get(t);if(o!==void 0){let a=this.valList[o],u=this.isBackgroundFetch(a);return this.statusTTL(n,o),this.isStale(o)?(n&&(n.get="stale"),u?(n&&(n.returnedStale=s&&a.__staleWhileFetching!==void 0),s?a.__staleWhileFetching:void 0):(r||this.delete(t),n&&(n.returnedStale=s),s?a:void 0)):(n&&(n.get="hit"),u?a.__staleWhileFetching:(this.moveToTail(o),i&&this.updateItemAge(o),a))}else n&&(n.get="miss")}connect(t,s){this.prev[s]=t,this.next[t]=s}moveToTail(t){t!==this.tail&&(t===this.head?this.head=this.next[t]:this.connect(this.prev[t],this.next[t]),this.connect(this.tail,t),this.tail=t)}get del(){return ft("del","delete"),this.delete}delete(t){let s=!1;if(this.size!==0){let i=this.keyMap.get(t);if(i!==void 0)if(s=!0,this.size===1)this.clear();else{this.removeItemSize(i);let r=this.valList[i];this.isBackgroundFetch(r)?r.__abortController.abort(new Error("deleted")):(this.dispose(r,t,"delete"),this.disposeAfter&&this.disposed.push([r,t,"delete"])),this.keyMap.delete(t),this.keyList[i]=null,this.valList[i]=null,i===this.tail?this.tail=this.prev[i]:i===this.head?this.head=this.next[i]:(this.next[this.prev[i]]=this.next[i],this.prev[this.next[i]]=this.prev[i]),this.size--,this.free.push(i)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return s}clear(){for(let t of this.rindexes({allowStale:!0})){let s=this.valList[t];if(this.isBackgroundFetch(s))s.__abortController.abort(new Error("deleted"));else{let i=this.keyList[t];this.dispose(s,i,"delete"),this.disposeAfter&&this.disposed.push([s,i,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return ft("reset","clear"),this.clear}get length(){return le("length","size"),this.size}static get AbortController(){return st}static get AbortSignal(){return Ot}};_t.exports=A});var Nt=H((Me,It)=>{"use strict";var f=(...e)=>e.every(t=>t)?e.join(""):"",b=e=>e?encodeURIComponent(e):"",zt=e=>e.toLowerCase().replace(/^\W+|\/|\W+$/g,"").replace(/\W+/g,"-"),he={sshtemplate:({domain:e,user:t,project:s,committish:i})=>`git@${e}:${t}/${s}.git${f("#",i)}`,sshurltemplate:({domain:e,user:t,project:s,committish:i})=>`git+ssh://git@${e}/${t}/${s}.git${f("#",i)}`,edittemplate:({domain:e,user:t,project:s,committish:i,editpath:r,path:n})=>`https://${e}/${t}/${s}${f("/",r,"/",b(i||"HEAD"),"/",n)}`,browsetemplate:({domain:e,user:t,project:s,committish:i,treepath:r})=>`https://${e}/${t}/${s}${f("/",r,"/",b(i))}`,browsetreetemplate:({domain:e,user:t,project:s,committish:i,treepath:r,path:n,fragment:o,hashformat:a})=>`https://${e}/${t}/${s}/${r}/${b(i||"HEAD")}/${n}${f("#",a(o||""))}`,browseblobtemplate:({domain:e,user:t,project:s,committish:i,blobpath:r,path:n,fragment:o,hashformat:a})=>`https://${e}/${t}/${s}/${r}/${b(i||"HEAD")}/${n}${f("#",a(o||""))}`,docstemplate:({domain:e,user:t,project:s,treepath:i,committish:r})=>`https://${e}/${t}/${s}${f("/",i,"/",b(r))}#readme`,httpstemplate:({auth:e,domain:t,user:s,project:i,committish:r})=>`git+https://${f(e,"@")}${t}/${s}/${i}.git${f("#",r)}`,filetemplate:({domain:e,user:t,project:s,committish:i,path:r})=>`https://${e}/${t}/${s}/raw/${b(i||"HEAD")}/${r}`,shortcuttemplate:({type:e,user:t,project:s,committish:i})=>`${e}:${t}/${s}${f("#",i)}`,pathtemplate:({user:e,project:t,committish:s})=>`${e}/${t}${f("#",s)}`,bugstemplate:({domain:e,user:t,project:s})=>`https://${e}/${t}/${s}/issues`,hashformat:zt},R={};R.github={protocols:["git:","http:","git+ssh:","git+https:","ssh:","https:"],domain:"github.com",treepath:"tree",blobpath:"blob",editpath:"edit",filetemplate:({auth:e,user:t,project:s,committish:i,path:r})=>`https://${f(e,"@")}raw.githubusercontent.com/${t}/${s}/${b(i||"HEAD")}/${r}`,gittemplate:({auth:e,domain:t,user:s,project:i,committish:r})=>`git://${f(e,"@")}${t}/${s}/${i}.git${f("#",r)}`,tarballtemplate:({domain:e,user:t,project:s,committish:i})=>`https://codeload.${e}/${t}/${s}/tar.gz/${b(i||"HEAD")}`,extract:e=>{let[,t,s,i,r]=e.pathname.split("/",5);if(!(i&&i!=="tree")&&(i||(r=e.hash.slice(1)),s&&s.endsWith(".git")&&(s=s.slice(0,-4)),!(!t||!s)))return{user:t,project:s,committish:r}}};R.bitbucket={protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"bitbucket.org",treepath:"src",blobpath:"src",editpath:"?mode=edit",edittemplate:({domain:e,user:t,project:s,committish:i,treepath:r,path:n,editpath:o})=>`https://${e}/${t}/${s}${f("/",r,"/",b(i||"HEAD"),"/",n,o)}`,tarballtemplate:({domain:e,user:t,project:s,committish:i})=>`https://${e}/${t}/${s}/get/${b(i||"HEAD")}.tar.gz`,extract:e=>{let[,t,s,i]=e.pathname.split("/",4);if(!["get"].includes(i)&&(s&&s.endsWith(".git")&&(s=s.slice(0,-4)),!(!t||!s)))return{user:t,project:s,committish:e.hash.slice(1)}}};R.gitlab={protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"gitlab.com",treepath:"tree",blobpath:"tree",editpath:"-/edit",httpstemplate:({auth:e,domain:t,user:s,project:i,committish:r})=>`git+https://${f(e,"@")}${t}/${s}/${i}.git${f("#",r)}`,tarballtemplate:({domain:e,user:t,project:s,committish:i})=>`https://${e}/${t}/${s}/repository/archive.tar.gz?ref=${b(i||"HEAD")}`,extract:e=>{let t=e.pathname.slice(1);if(t.includes("/-/")||t.includes("/archive.tar.gz"))return;let s=t.split("/"),i=s.pop();i.endsWith(".git")&&(i=i.slice(0,-4));let r=s.join("/");if(!(!r||!i))return{user:r,project:i,committish:e.hash.slice(1)}}};R.gist={protocols:["git:","git+ssh:","git+https:","ssh:","https:"],domain:"gist.github.com",editpath:"edit",sshtemplate:({domain:e,project:t,committish:s})=>`git@${e}:${t}.git${f("#",s)}`,sshurltemplate:({domain:e,project:t,committish:s})=>`git+ssh://git@${e}/${t}.git${f("#",s)}`,edittemplate:({domain:e,user:t,project:s,committish:i,editpath:r})=>`https://${e}/${t}/${s}${f("/",b(i))}/${r}`,browsetemplate:({domain:e,project:t,committish:s})=>`https://${e}/${t}${f("/",b(s))}`,browsetreetemplate:({domain:e,project:t,committish:s,path:i,hashformat:r})=>`https://${e}/${t}${f("/",b(s))}${f("#",r(i))}`,browseblobtemplate:({domain:e,project:t,committish:s,path:i,hashformat:r})=>`https://${e}/${t}${f("/",b(s))}${f("#",r(i))}`,docstemplate:({domain:e,project:t,committish:s})=>`https://${e}/${t}${f("/",b(s))}`,httpstemplate:({domain:e,project:t,committish:s})=>`git+https://${e}/${t}.git${f("#",s)}`,filetemplate:({user:e,project:t,committish:s,path:i})=>`https://gist.githubusercontent.com/${e}/${t}/raw${f("/",b(s))}/${i}`,shortcuttemplate:({type:e,project:t,committish:s})=>`${e}:${t}${f("#",s)}`,pathtemplate:({project:e,committish:t})=>`${e}${f("#",t)}`,bugstemplate:({domain:e,project:t})=>`https://${e}/${t}`,gittemplate:({domain:e,project:t,committish:s})=>`git://${e}/${t}.git${f("#",s)}`,tarballtemplate:({project:e,committish:t})=>`https://codeload.github.com/gist/${e}/tar.gz/${b(t||"HEAD")}`,extract:e=>{let[,t,s,i]=e.pathname.split("/",4);if(i!=="raw"){if(!s){if(!t)return;s=t,t=null}return s.endsWith(".git")&&(s=s.slice(0,-4)),{user:t,project:s,committish:e.hash.slice(1)}}},hashformat:function(e){return e&&"file-"+zt(e)}};R.sourcehut={protocols:["git+ssh:","https:"],domain:"git.sr.ht",treepath:"tree",blobpath:"tree",filetemplate:({domain:e,user:t,project:s,committish:i,path:r})=>`https://${e}/${t}/${s}/blob/${b(i)||"HEAD"}/${r}`,httpstemplate:({domain:e,user:t,project:s,committish:i})=>`https://${e}/${t}/${s}.git${f("#",i)}`,tarballtemplate:({domain:e,user:t,project:s,committish:i})=>`https://${e}/${t}/${s}/archive/${b(i)||"HEAD"}.tar.gz`,bugstemplate:({user:e,project:t})=>`https://todo.sr.ht/${e}/${t}`,extract:e=>{let[,t,s,i]=e.pathname.split("/",4);if(!["archive"].includes(i)&&(s&&s.endsWith(".git")&&(s=s.slice(0,-4)),!(!t||!s)))return{user:t,project:s,committish:e.hash.slice(1)}}};for(let[e,t]of Object.entries(R))R[e]=Object.assign({},he,t);It.exports=R});var gt=H((De,Ct)=>{var fe=$("url"),mt=(e,t,s)=>{let i=e.indexOf(s);return e.lastIndexOf(t,i>-1?i:1/0)},Ht=e=>{try{return new fe.URL(e)}catch{}},ue=(e,t)=>{let s=e.indexOf(":"),i=e.slice(0,s+1);if(Object.prototype.hasOwnProperty.call(t,i))return e;let r=e.indexOf("@");return r>-1?r>s?`git+ssh://${e}`:e:e.indexOf("//")===s+1?e:`${e.slice(0,s+1)}//${e.slice(s+1)}`},pe=e=>{let t=mt(e,"@","#"),s=mt(e,":","#");return s>t&&(e=e.slice(0,s)+"/"+e.slice(s+1)),mt(e,":","#")===-1&&e.indexOf("//")===-1&&(e=`git+ssh://${e}`),e};Ct.exports=(e,t)=>{let s=t?ue(e,t):e;return Ht(s)||Ht(pe(s))}});var Ut=H((We,jt)=>{"use strict";var de=gt(),me=e=>{let t=e.indexOf("#"),s=e.indexOf("/"),i=e.indexOf("/",s+1),r=e.indexOf(":"),n=/\s/.exec(e),o=e.indexOf("@"),a=!n||t>-1&&n.index>t,u=o===-1||t>-1&&o>t,h=r===-1||t>-1&&r>t,c=i===-1||t>-1&&i>t,S=s>0,l=t>-1?e[t-1]!=="/":!e.endsWith("/"),p=!e.startsWith(".");return a&&S&&l&&p&&u&&h&&c};jt.exports=(e,t,{gitHosts:s,protocols:i})=>{var y,d;if(!e)return;let r=me(e)?`github:${e}`:e,n=de(r,i);if(!n)return;let o=s.byShortcut[n.protocol],a=s.byDomain[n.hostname.startsWith("www.")?n.hostname.slice(4):n.hostname],u=o||a;if(!u)return;let h=s[o||a],c=null;((y=i[n.protocol])==null?void 0:y.auth)&&(n.username||n.password)&&(c=`${n.username}${n.password?":"+n.password:""}`);let S=null,l=null,p=null,v=null;try{if(o){let m=n.pathname.startsWith("/")?n.pathname.slice(1):n.pathname,F=m.indexOf("@");F>-1&&(m=m.slice(F+1));let E=m.lastIndexOf("/");E>-1?(l=decodeURIComponent(m.slice(0,E)),l||(l=null),p=decodeURIComponent(m.slice(E+1))):p=decodeURIComponent(m),p.endsWith(".git")&&(p=p.slice(0,-4)),n.hash&&(S=decodeURIComponent(n.hash.slice(1))),v="shortcut"}else{if(!h.protocols.includes(n.protocol))return;let m=h.extract(n);if(!m)return;l=m.user&&decodeURIComponent(m.user),p=decodeURIComponent(m.project),S=decodeURIComponent(m.committish),v=((d=i[n.protocol])==null?void 0:d.name)||n.protocol.slice(0,-1)}}catch(m){if(m instanceof URIError)return;throw m}return[u,l,c,p,S,v,t]}});var Dt=H((Be,Mt)=>{"use strict";var ge=Rt(),Se=Nt(),be=Ut(),ye=gt(),St=new ge({max:1e3}),z,X,x,w,P=class{constructor(t,s,i,r,n,o,a={}){et(this,x);Object.assign(this,T(P,z)[t],{type:t,user:s,auth:i,project:r,committish:n,default:o,opts:a})}static addHost(t,s){T(P,z)[t]=s,T(P,z).byDomain[s.domain]=t,T(P,z).byShortcut[`${t}:`]=t,T(P,X)[`${t}:`]={name:t}}static fromUrl(t,s){if(typeof t!="string")return;let i=t+JSON.stringify(s||{});if(!St.has(i)){let r=be(t,s,{gitHosts:T(P,z),protocols:T(P,X)});St.set(i,r?new P(...r):void 0)}return St.get(i)}static parseUrl(t){return ye(t)}hash(){return this.committish?`#${this.committish}`:""}ssh(t){return k(this,x,w).call(this,this.sshtemplate,t)}sshurl(t){return k(this,x,w).call(this,this.sshurltemplate,t)}browse(t,...s){return typeof t!="string"?k(this,x,w).call(this,this.browsetemplate,t):typeof s[0]!="string"?k(this,x,w).call(this,this.browsetreetemplate,{...s[0],path:t}):k(this,x,w).call(this,this.browsetreetemplate,{...s[1],fragment:s[0],path:t})}browseFile(t,...s){return typeof s[0]!="string"?k(this,x,w).call(this,this.browseblobtemplate,{...s[0],path:t}):k(this,x,w).call(this,this.browseblobtemplate,{...s[1],fragment:s[0],path:t})}docs(t){return k(this,x,w).call(this,this.docstemplate,t)}bugs(t){return k(this,x,w).call(this,this.bugstemplate,t)}https(t){return k(this,x,w).call(this,this.httpstemplate,t)}git(t){return k(this,x,w).call(this,this.gittemplate,t)}shortcut(t){return k(this,x,w).call(this,this.shortcuttemplate,t)}path(t){return k(this,x,w).call(this,this.pathtemplate,t)}tarball(t){return k(this,x,w).call(this,this.tarballtemplate,{...t,noCommittish:!1})}file(t,s){return k(this,x,w).call(this,this.filetemplate,{...s,path:t})}edit(t,s){return k(this,x,w).call(this,this.edittemplate,{...s,path:t})}getDefaultRepresentation(){return this.default}toString(t){return this.default&&typeof this[this.default]=="function"?this[this.default](t):this.sshurl(t)}},B=P;z=new WeakMap,X=new WeakMap,x=new WeakSet,w=function(t,s){if(typeof t!="function")return null;let i={...this,...this.opts,...s};i.path||(i.path=""),i.path.startsWith("/")&&(i.path=i.path.slice(1)),i.noCommittish&&(i.committish=null);let r=t(i);return i.noGitPlus&&r.startsWith("git+")?r.slice(4):r},et(B,z,{byShortcut:{},byDomain:{}}),et(B,X,{"git+ssh:":{name:"sshurl"},"ssh:":{name:"sshurl"},"git+https:":{name:"https",auth:!0},"git:":{auth:!0},"http:":{auth:!0},"https:":{auth:!0},"git+http:":{auth:!0}});for(let[e,t]of Object.entries(Se))B.addHost(e,t);Mt.exports=B});var ze={};tt(ze,{default:()=>Re});var qt=$("@yarnpkg/cli"),M=$("@yarnpkg/core"),U=$("clipanion"),Zt=$t(Pt());var g=$("@yarnpkg/core"),O=$("@yarnpkg/fslib"),Gt=$t(Dt());var yt={};tt(yt,{fs:()=>ke,getPackagePath:()=>xe});var Wt=$("@yarnpkg/plugin-pnp"),rt=$("@yarnpkg/core"),nt=$("@yarnpkg/fslib"),Bt=$("@yarnpkg/libzip");var Q=()=>({os:[process.platform],cpu:[process.arch],libc:[]});var xe=async(e,t)=>{if(ve(e),!rt.structUtils.isPackageCompatible(t,Q()))return null;let s=rt.structUtils.convertPackageToLocator(t),i={name:rt.structUtils.stringifyIdent(s),reference:s.reference},r=bt.getPackageInformation(i);if(!r)return null;let{packageLocation:n}=r;return n},bt,ve=e=>{bt||(bt=module.require((0,Wt.getPnpPath)(e).cjs))},ke=new nt.VirtualFS({baseFs:new nt.ZipOpenFS({libzip:(0,Bt.getLibzipSync)(),readOnlyArchives:!0})});var xt={};tt(xt,{_getYarnStateAliases:()=>Yt,fs:()=>Ee,getPackagePath:()=>we});var C=$("@yarnpkg/core"),Qt=$("@yarnpkg/parsers"),I=$("@yarnpkg/fslib");var we=async(e,t)=>{if(await $e(e),!C.structUtils.isPackageCompatible(t,Q()))return null;let s=C.structUtils.convertPackageToLocator(t),i=C.structUtils.stringifyLocator(s),r=ot[i]||Vt[i];if(!r)return null;let n=r.locations[0];return n?I.ppath.join(e.cwd,n):e.cwd},ot,Vt,$e=async e=>{if(!ot){let t=I.ppath.join(e.configuration.projectCwd,I.Filename.nodeModules,".yarn-state.yml");ot=(0,Qt.parseSyml)(await I.xfs.readFilePromise(t,"utf8")),Vt=Yt(ot)}},Ee=I.xfs,Yt=e=>Object.entries(e).reduce((t,[s,i])=>{if(!i.aliases)return t;let r=C.structUtils.parseLocator(s);for(let n of i.aliases){let o=C.structUtils.makeLocator(r,n),a=C.structUtils.stringifyLocator(o);t[a]=i}return t},{});var vt={};tt(vt,{fs:()=>Fe,getPackagePath:()=>Le});var q=$("@yarnpkg/core"),j=$("@yarnpkg/fslib");var Le=async(e,t)=>{if(!q.structUtils.isPackageCompatible(t,Q()))return null;let s=q.structUtils.convertPackageToLocator(t),i=q.structUtils.slugifyLocator(s),r=q.structUtils.stringifyIdent(s),n=e.tryWorkspaceByLocator(s);return n?n.cwd:j.ppath.join(e.configuration.projectCwd,j.Filename.nodeModules,".store",i,j.Filename.nodeModules,r)},Fe=j.xfs;var Jt=e=>{switch(e){case"pnp":return yt;case"node-modules":return xt;case"pnpm":return vt;default:throw new Error("Unsupported linker")}};var us=O.npath.basename(__dirname)==="@yarnpkg"?O.ppath.join(O.npath.toPortablePath(__dirname),"../.."):O.ppath.join(O.npath.toPortablePath(__dirname),".."),Kt=async(e,t,s,i)=>{let r={},o={children:{licenses:{children:r}}},a=await Pe(e,s,i),u=Jt(e.configuration.get("nodeLinker"));for(let[h,c]of a.entries()){let S=await u.getPackagePath(e,c);if(S===null)continue;let l=JSON.parse(await u.fs.readFilePromise(O.ppath.join(S,O.Filename.manifest),"utf8")),{license:p,url:v,vendorName:y,vendorUrl:d}=Ae(l),m=g.structUtils.convertPackageToLocator(c),F=g.structUtils.stringifyLocator(g.structUtils.isVirtualLocator(m)?g.structUtils.devirtualizeLocator(m):m),N={children:{package:{value:g.formatUtils.tuple(g.formatUtils.Type.DEPENDENT,{locator:m,descriptor:h})},...v?{url:{value:g.formatUtils.tuple(g.formatUtils.Type.NO_HINT,kt("URL",v,t))}}:{},...y?{vendorName:{value:g.formatUtils.tuple(g.formatUtils.Type.NO_HINT,kt("VendorName",y,t))}}:{},...d?{vendorUrl:{value:g.formatUtils.tuple(g.formatUtils.Type.NO_HINT,kt("VendorUrl",d,t))}}:{},license:{value:g.formatUtils.tuple(g.formatUtils.Type.NO_HINT,p)}}};r[F]=N}return o},Pe=async(e,t,s)=>{let i=new Map,r;if(t){if(s){for(let u of e.workspaces)u.manifest.devDependencies.clear();let a=await g.Cache.find(e.configuration);await e.resolveEverything({report:new g.ThrowReport,cache:a})}r=e.storedDescriptors.values()}else r=e.workspaces.flatMap(a=>{let u=[a.anchoredDescriptor];for(let[h,c]of a.dependencies.entries())s&&a.manifest.devDependencies.has(h)||u.push(c);return u});let n=g.miscUtils.sortMap(r,[a=>g.structUtils.stringifyIdent(a),a=>g.structUtils.isVirtualDescriptor(a)?"0":"1",a=>a.range]),o=new Set;for(let a of n.values()){let u=e.storedResolutions.get(a.descriptorHash);if(!u)continue;let h=e.storedPackages.get(u);if(!h)continue;let{descriptorHash:c}=g.structUtils.isVirtualDescriptor(a)?g.structUtils.devirtualizeDescriptor(a):a;o.has(c)||(o.add(c),i.set(a,h))}return i};function Oe(e){let t={},s=e.match(/^([^(<]+)/);if(s){let n=s[0].trim();n&&(t.name=n)}let i=e.match(/<([^>]+)>/);i&&(t.email=i[1]);let r=e.match(/\(([^)]+)\)/);return r&&(t.url=r[1]),t}var Ae=e=>{let{license:t,licenses:s,repository:i,homepage:r,author:n}=e,o=typeof n=="string"?Oe(n):n;return{license:(()=>{if(t)return at(t);if(s){if(!Array.isArray(s))return at(s);if(s.length===1)return at(s[0]);if(s.length>1)return`(${s.map(at).join(" OR ")})`}return Xt})(),url:Te(i)||r,vendorName:o==null?void 0:o.name,vendorUrl:r||(o==null?void 0:o.url)}},Xt="UNKNOWN",at=e=>(typeof e!="string"?e.type:e)||Xt,Te=e=>{let t=typeof e=="string"?e:e==null?void 0:e.url;if(!t)return t;let s=Gt.fromUrl(t);return!s||s.getDefaultRepresentation()!=="shortcut"?t:s.https()},kt=(e,t,s)=>s?t:`${e}: ${t}`;var V=class extends U.Command{constructor(){super(...arguments);this.recursive=U.Option.Boolean("-R,--recursive",!1,{description:"Include transitive dependencies (dependencies of direct dependencies)"});this.production=U.Option.Boolean("--production",!1,{description:"Exclude development dependencies"});this.json=U.Option.Boolean("--json",!1,{description:"Format output as JSON"})}async execute(){var o;let s=await M.Configuration.find(this.context.cwd,this.context.plugins),{project:i,workspace:r}=await M.Project.find(s,this.context.cwd);if(!r)throw new qt.WorkspaceRequiredError(i.cwd,this.context.cwd);await i.restoreInstallState();let n=await Kt(i,this.json,this.recursive,this.production);if(this.json){let a=Array.isArray(n.children)?n.children.values():Object.values((o=n.children)!=null?o:{});for(let u of a)u&&this.context.stdout.write(`${(0,Zt.default)(JSON.stringify(M.treeUtils.treeNodeToJson(u)))}
`);return}M.treeUtils.emitTree(n,{configuration:s,stdout:this.context.stdout,separators:1})}};V.paths=[["licenses","list"]],V.usage=U.Command.Usage({description:"display the licenses for all packages in the project",details:`
      This command prints the license information for packages in the project. By default, only direct dependencies are listed.

      If \`-R,--recursive\` is set, the listing will include transitive dependencies (dependencies of direct dependencies).

      If \`--production\` is set, the listing will exclude development dependencies.
    `,examples:[["List all licenses of direct dependencies","$0 licenses list"],["List all licenses of direct and transitive dependencies","$0 licenses list --recursive"],["List all licenses of production dependencies only","$0 licenses list --production"]]});var _e={commands:[V]},Re=_e;return ne(ze);})();
/**
 * @license
 * format-to-json v3.0.3
 * GitHub Repository <https://github.com/CN-Tower/format-to-json>
 * Released under MIT license <https://github.com/CN-Tower/format-to-json/blob/master/LICENSE>
 */
return plugin;
}
};
